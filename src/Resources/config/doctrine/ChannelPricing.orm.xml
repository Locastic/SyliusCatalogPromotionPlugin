<doctrine-mapping xmlns="http://doctrine-project.org/schemas/orm/doctrine-mapping"
                  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                  xsi:schemaLocation="http://doctrine-project.org/schemas/orm/doctrine-mapping
                                      http://doctrine-project.org/schemas/orm/doctrine-mapping.xsd"
>

    <mapped-superclass name="Locastic\SyliusCatalogPromotionPlugin\Entity\ChannelPricing" table="sylius_channel_pricing">

        <many-to-one field="appliedCatalogPromotion" target-entity="Locastic\SyliusCatalogPromotionPlugin\Entity\CatalogPromotion">
            <join-column name="applied_catalog_promotion" referenced-column-name="id"/>
        </many-to-one>

        <field name="discountPercentage" type="integer" nullable="true"/>

        <entity-listeners>
            <entity-listener class="Locastic\SyliusCatalogPromotionPlugin\EventListener\ChannelPricingListener">
                <lifecycle-callback type="postLoad" method="postLoadHandler"/>
            </entity-listener>
        </entity-listeners>

    </mapped-superclass>
</doctrine-mapping>